<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_121) on Mon Dec 12 16:43:53 PST 2016 -->
<title>java.lang.ref (Java Platform SE 8 )</title>
<meta name="date" content="2016-12-12">
<meta name="keywords" content="java.lang.ref package">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="java.lang.ref (Java Platform SE 8 )";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><strong>Java&trade;&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;8</strong></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../java/lang/management/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../java/lang/reflect/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?java/lang/ref/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;java.lang.ref</h1>
<div class="docSummary">
<div class="block">Provides reference-object classes, which support a limited degree of
interaction with the garbage collector.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/ref/PhantomReference.html" title="class in java.lang.ref">PhantomReference</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Phantom reference objects, which are enqueued after the collector
 determines that their referents may otherwise be reclaimed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../java/lang/ref/Reference.html" title="class in java.lang.ref">Reference</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Abstract base class for reference objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/ref/ReferenceQueue.html" title="class in java.lang.ref">ReferenceQueue</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Reference queues, to which registered reference objects are appended by the
 garbage collector after the appropriate reachability changes are detected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../java/lang/ref/SoftReference.html" title="class in java.lang.ref">SoftReference</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Soft reference objects, which are cleared at the discretion of the garbage
 collector in response to memory demand.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../java/lang/ref/WeakReference.html" title="class in java.lang.ref">WeakReference</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Weak reference objects, which do not prevent their referents from being
 made finalizable, finalized, and then reclaimed.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package java.lang.ref Description">Package java.lang.ref Description</h2>
<div class="block">Provides reference-object classes, which support a limited degree of
interaction with the garbage collector.  A program may use a reference object
to maintain a reference to some other object in such a way that the latter
object may still be reclaimed by the collector.  A program may also arrange to
be notified some time after the collector has determined that the reachability
of a given object has changed.


<h2>Package Specification</h2>

A <em>reference object</em> encapsulates a reference to some other object so
that the reference itself may be examined and manipulated like any other
object.  Three types of reference objects are provided, each weaker than the
last: <em>soft</em>, <em>weak</em>, and <em>phantom</em>.  Each type
corresponds to a different level of reachability, as defined below.  Soft
references are for implementing memory-sensitive caches, weak references are
for implementing canonicalizing mappings that do not prevent their keys (or
values) from being reclaimed, and phantom references are for scheduling
pre-mortem cleanup actions in a more flexible way than is possible with the
Java finalization mechanism.

<p> Each reference-object type is implemented by a subclass of the abstract
base <code><a href="../../../java/lang/ref/Reference.html" title="class in java.lang.ref"><code>Reference</code></a></code> class.  An instance of one of
these subclasses encapsulates a single reference to a particular object, called
the <em>referent</em>.  Every reference object provides methods for getting and
clearing the reference.  Aside from the clearing operation reference objects
are otherwise immutable, so no <code>set</code> operation is provided.  A
program may further subclass these subclasses, adding whatever fields and
methods are required for its purposes, or it may use these subclasses without
change.


<h3>Notification</h3>

A program may request to be notified of changes in an object's reachability by
<em>registering</em> an appropriate reference object with a <em>reference
queue</em> at the time the reference object is created.  Some time after the
garbage collector determines that the reachability of the referent has changed
to the value corresponding to the type of the reference, it will add the
reference to the associated queue.  At this point, the reference is considered
to be <em>enqueued</em>.  The program may remove references from a queue either
by polling or by blocking until a reference becomes available.  Reference
queues are implemented by the <code><a href="../../../java/lang/ref/ReferenceQueue.html" title="class in java.lang.ref"><code>ReferenceQueue</code></a></code>
class.

<p> The relationship between a registered reference object and its queue is
one-sided.  That is, a queue does not keep track of the references that are
registered with it.  If a registered reference becomes unreachable itself, then
it will never be enqueued.  It is the responsibility of the program using
reference objects to ensure that the objects remain reachable for as long as
the program is interested in their referents.

<p> While some programs will choose to dedicate a thread to removing reference
objects from one or more queues and processing them, this is by no means
necessary.  A tactic that often works well is to examine a reference queue in
the course of performing some other fairly-frequent action.  For example, a
hashtable that uses weak references to implement weak keys could poll its
reference queue each time the table is accessed.  This is how the <code><a href="../../../java/util/WeakHashMap.html" title="class in java.util"><code>WeakHashMap</code></a></code> class works.  Because the <code><a href="../../../java/lang/ref/ReferenceQueue.html#poll--"><code>ReferenceQueue.poll</code></a></code> method simply
checks an internal data structure, this check will add little overhead to the
hashtable access methods.


<h3>Automatically-cleared references</h3>

Soft and weak references are automatically cleared by the collector before
being added to the queues with which they are registered, if any.  Therefore
soft and weak references need not be registered with a queue in order to be
useful, while phantom references do.  An object that is reachable via phantom
references will remain so until all such references are cleared or themselves
become unreachable.


<a name="reachability"></a>
<h3>Reachability</h3>

Going from strongest to weakest, the different levels of reachability reflect
the life cycle of an object.  They are operationally defined as follows:

<ul>

<li> An object is <em>strongly reachable</em> if it can be reached by some
thread without traversing any reference objects.  A newly-created object is
strongly reachable by the thread that created it.

<li> An object is <em>softly reachable</em> if it is not strongly reachable but
can be reached by traversing a soft reference.

<li> An object is <em>weakly reachable</em> if it is neither strongly nor
softly reachable but can be reached by traversing a weak reference.  When the
weak references to a weakly-reachable object are cleared, the object becomes
eligible for finalization.

<li> An object is <em>phantom reachable</em> if it is neither strongly, softly,
nor weakly reachable, it has been finalized, and some phantom reference refers
to it.

<li> Finally, an object is <em>unreachable</em>, and therefore eligible for
reclamation, when it is not reachable in any of the above ways.

</ul></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.2

<!--
<h2>Related Documentation</h2>

For overviews, tutorials, examples, guides, and tool documentation, please see:
<ul>
  <li><a href="">##### REFER TO NON-SPEC DOCUMENTATION HERE #####</a>
</ul>
--></dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><strong>Java&trade;&nbsp;Platform<br>Standard&nbsp;Ed.&nbsp;8</strong></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../java/lang/management/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../java/lang/reflect/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?java/lang/ref/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><font size="-1"> <a href="http://bugreport.sun.com/bugreport/">Submit a bug or feature</a> <br>For further API reference and developer documentation, see <a href="https://docs.oracle.com/javase/8/docs/index.html" target="_blank">Java SE Documentation</a>. That documentation contains more detailed, developer-targeted descriptions, with conceptual overviews, definitions of terms, workarounds, and working code examples.<br> <a href="../../../../legal/cpyr.html">Copyright</a> &#x00a9; 1993, 2016, Oracle and/or its affiliates.  All rights reserved. Use is subject to <a href="http://download.oracle.com/otndocs/jcp/java_se-8-mrel-spec/license.html">license terms</a>. Also see the <a target="_blank" href="http://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. </font></small></p>
</body>
</html>
